@(rs: es.weso.wfLodPortal.models.ResultQuery)

@import es.weso.wfLodPortal.utils.CommonURIS._
@import es.weso.wfLodPortal.models._
@import views.html.helpers._
@import views.html.helpers.utils._

@iso2var = @{ 
		val iso2 = rs.subject.get(wfOnto,"has-iso-alpha2-code")
		iso2 match {
			case Some(iso2) => iso2.nodes.head.node match {
	        case l: RdfLiteral => {l.value.toUpperCase}
	            case _ => {}
	        }
			case None => {}
		}
	}

@main(""){
	<script src="@routes.Assets.at("javascripts/jvectormap.js")"></script>
	<script src="@routes.Assets.at("javascripts/map.js")"></script>
	@defining(label(rs)){label =>
	
	<nav class="breadcrumbs">
		Data &gt; <a href="/ontology/Country">Country</a> &gt; @label
	</nav>	
	<div class="country-map" id="country-map" 
		title="Map for @label obtained from jVectorMap.com and this from naturalearthdata.com">
	</div>  
	<img alt="Country flag for @label obtained from flagpedia.net" class="flag" src="@image" />
	
	<h1>@label</h1>
	<h2><a href="@rdfType(rs)">Country</a></h2>
	
	@grill(rs)
	
	<script>
	    $(function(){
	    	var code = "@iso2var";
	    	
	    	var container = "#country-map";
	
	    	var map = new jvm.WorldMap({
	    			container: $(container), 
	    			map: "world_merc_en",
	    			backgroundColor: "#DCEBF0",
	    			regionStyle: {
	    				initial: {
		    				fill: "#ccc"	
	    				},
				    	selected: {
				            fill: "#555"
				        }
				    },
				    regionsSelectable: false,
				    onRegionOver: function (e, label, code) { e.preventDefault(); return false; },
				    onRegionLabelShow: function (e, code) { e.preventDefault(); return false; }
	    		});
	   
	    	map.setFocus(code, null, null);
	    	
	    	var selectedRegions = new Array(code);
	    	map.setSelectedRegions(selectedRegions);
	    });
	    
	</script>
	}
}


@image = @{ 
	val img = toLower(iso2(rs)) + ".png" 
			
	routes.Assets.at("images/flags/" + img)
}