function SortedArray(){var u=0;this.array=[];for(var k=arguments.length;u<k;)this.insert(arguments[u++]);this.length=0;this.insert=function(b){var c=this.array,l=c.length;c.push(b);for(this.length=this.array.length;l;){b=l;var g=--l;if(c[b]<c[g]){var f=c[b];c[b]=c[g];c[g]=f}}return this};this.get=function(b){return this.array[b]};this.getArray=function(){return this.array};this.uniqueInsert=function(b){-1==this.search(b)&&this.insert(b)};this.search=function(b){for(var c=0,l=this.array,g=l.length;g>
c;){var f=(g+c)/2>>>0,k=l[f];if(k<b)c=f+1;else if(k>b)g=f;else return f}return-1};this.remove=function(b){b=this.search(b);0<=b&&this.array.splice(b,1);this.length=this.array.length;return this}}"undefined"===typeof exports&&(exports={});
var Selector=exports.Selector=function(u,k){function b(a,d,r,n,g){var f=document.createElement("ul");f.className=k["ul-class"];1<r&&(f.style.display="none");for(var u=a.length,t=null,w=0;w<u;w++){var m=a[w],p=m.children&&m.children.length?m.children.length:0,h=document.createElement("li");f.appendChild(h);h.isSelected=!1;h.code=m.code;h.liParent=d;h.data=m;var e=document.createElement("a");e.href="javascript: void(0)";e.value=m.label;e.previousSiblingLink=n;e.nextSiblingLink=null;e.parentLink=g;n&&
(n.nextSiblingLink=e);0==w&&(t=e);e.className="circleAndText";h.appendChild(e);e.liParent=h;e.onclick=function(a){var d=this.liParent;l(d,k.callback,!d.isSelected);a.stopPropagation()};var v=document.createElement("div");v.className=0<p?"plusOrMinus":"hidden-plusOrMinus";v.innerHTML="+";e.appendChild(v);0<p&&(v.onclick=function(a){c(this);a.stopPropagation()});e.plusOrMinus=v;e.onkeydown=function(a){if(13==a.keyCode){var d=this.liParent;l(d,k.callback,!d.isSelected);a.stopPropagation();return!1}if(38==
a.keyCode)return this.previousSiblingLink&&this.previousSiblingLink.focus(),a.stopPropagation(),!1;if(40==a.keyCode)return this.plusOrMinus.opened&&this.firstChildLink?this.firstChildLink.focus():this.nextSiblingLink?this.nextSiblingLink.focus():this.parentLink.nextSiblingLink&&this.parentLink.nextSiblingLink.focus(),a.stopPropagation(),!1;if(37==a.keyCode||39==a.keyCode)return a.stopPropagation(),c(this.plusOrMinus),a.keyCode=9,a.keyCode};var s=document.createElement("div");s.className="circle";
e.appendChild(s);n=document.createElement("div");n.className="title";e.appendChild(n);var q=document.createTextNode(m.label);n.appendChild(q);n=e;0<p&&(p=document.createElement("span"),p.className="empty-counter",s.appendChild(p),q=document.createTextNode("0"),p.appendChild(q),h.counter={div:p,value:0},s=b(m.children,h,r+1,n,e),h.appendChild(s.ul),e.firstChildLink=s.firstChildLink,v.childrenUl=s.ul);h.childNumber=m.children?m.children.length:0}return{ul:f,firstChildLink:t}}function c(a){"+"==a.innerHTML?
(a.innerHTML="&#8212;",a.childrenUl&&(a.childrenUl.style.display="block"),a.opened=!0):(a.innerHTML="+",a.childrenUl&&(a.childrenUl.style.display="none"),a.opened=!1)}function l(a,d,r){g(a,r);if(a.liParent){var b=a.liParent.counter.value,b=r?b+1:b-1;f(a.liParent,b);r?b==a.liParent.childNumber&&(a.liParent.className="selected",a.liParent.isSelected=!0,q(a.liParent.code,!0)):(a.liParent.className="not-selected",a.liParent.isSelected=!1,q(a.liParent.code,!1))}0<a.childNumber&&f(a,r?a.childNumber:0);
d&&d.call(a,a.data,x)}function g(a,d){"li"==a.tagName.toLowerCase()&&(a.isSelected=d,a.className=d?"selected":"not-selected",q(a.code,d),a.firstChild.title=a.firstChild.value+(d?" is selected":""));for(var b=a&&a.children&&a.children.length?a.children.length:0,c=0;c<b;c++)g(a.children[c],d)}function f(a,d){var b=a.counter;b.value=d;b.div.innerHTML=b.value;b.div.className=0<b.value?"counter":"empty-counter";d=a.firstChild.value;a.firstChild.title=d+": "+b.value+(1!=b.value?" selected countries":" selected country")}
function q(a,b){a&&(b?x.uniqueInsert(a):x.remove(a))}function y(a,b){if(b instanceof Array)return b;if("object"===typeof b){for(var c in b)a[c]=y(a[c],b[c]);return a}return b}var z={"ul-class":"default-selector",callback:null},x=new SortedArray,t=null;(function(){var a=k;if(a){"string"===typeof a&&(a={container:a});var d=JSON.parse(JSON.stringify(z)),c;for(c in a)d[c]=y(d[c],a[c]);a=d}else a=JSON.parse(JSON.stringify(z));k=a;t=b(u,null,1,null,null).ul})();this.render=function(){return t};this.clear=
function(){for(var a=t.children.length,b=0;b<a;b++)l(t.children[b],null,!1)}};
