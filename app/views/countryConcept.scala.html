@(rs: models.ResultQuery, label: String, currentType: Tuple2[String, String])

@main("") {
	<nav class="breadcrumbs">
		Data &gt; Country
	</nav>
	<h1>@label</h1>
	<h2><a href="@currentType._1">@currentType._2</a></h2>	
	<div id="world-map" class="country-concept-map"></div>
	@helpers.grill(rs)
	
	<script src="@routes.Assets.at("javascripts/jvectormap.js")"></script>
	<script src="@routes.Assets.at("javascripts/map.js")"></script>	
	<script>
		var countryCodes = {};
		var countries = {};
		
		@for(country <- rs.predicate.get("http://www.w3.org/1999/02/22-rdf-syntax-ns#type").get.nodes) {	
			countryCodes["@country.dss.subject.get.data.get("http://localhost:9000/ontology/has-iso-alpha2-code").get.nodes.head.node.asInstanceOf[models.RdfLiteral].value"]  =		
			"@country.node.asInstanceOf[models.RdfResource].uri.relative";
			
			countries["@country.dss.subject.get.data.get("http://localhost:9000/ontology/has-iso-alpha2-code").get.nodes.head.node.asInstanceOf[models.RdfLiteral].value"]  = 1;
		}
		
		$('#world-map').vectorMap({
			map: 'world_merc_en',
			backgroundColor: "#fff",
			series: {
		    	regions: [{
			    	values: countries,
			    	scale: ['#C8EEFF', '#0071A4'],
			    	normalizeFunction: 'polynomial'
			    }]
			},
			zoomOnScroll: false,
			
			onRegionLabelShow: function(e, el, code) {
				console.log(code)
		    },
		    
		    onRegionClick: function(e, code) {
		    	var uri = countryCodes[code];
		    	console.log(uri)
		    	if (uri)
				    window.location.href = uri;
		    }
		});
	</script>
}