@(rs: models.ResultQuery, label: String, currentType: Tuple2[String, String])

@iso2 = @{ 
			rs.subject.get("http://localhost:9000/ontology/has-iso-alpha2-code")
				.get.nodes(0).node.asInstanceOf[models.RdfLiteral].value.toLowerCase 
		}

@image = @{ 
			val img = iso2 + ".png" 
			
			routes.Assets.at("images/flags/" + img)
		}
		
@iso2Str = @{ iso2.toUpperCase }

@main("") {
	<script src="@routes.Assets.at("javascripts/jvectormap.js")"></script>
	<script src="@routes.Assets.at("javascripts/map.js")"></script>

	<div class="country-map" id="country-map" 
		title="Map for @label obtained from jVectorMap.com and this from naturalearthdata.com">
	</div>  
	<img alt="Country flag for @label obtained from flagpedia.net" class="flag" src="@image" />
	
	<h1>@label</h1>
	<h2><a href="@currentType._1">Country</a></h2>
	
	@helpers.grill(rs)
	
	<script>
	    $(function(){
	    	var code = "@iso2Str";
	    	
	    	var container = "#country-map";
	
	    	var map = new jvm.WorldMap({
	    			container: $(container), 
	    			map: "world_merc_en",
	    			backgroundColor: "#DCEBF0",
	    			regionStyle: {
	    				initial: {
		    				fill: "#ccc"	
	    				},
				    	selected: {
				            fill: "#555"
				        }
				    },
				    regionsSelectable: false,
				    onRegionOver: function (e, label, code) { e.preventDefault(); return false; },
				    onRegionLabelShow: function (e, code) { e.preventDefault(); return false; }
	    		});
	   
	    	map.setFocus(code, null, null);
	    	
	    	var selectedRegions = new Array(code);
	    	map.setSelectedRegions(selectedRegions);
	    });
	    
	</script>
}